<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />

  <title>Shuvam Khanal — Blog</title>

  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Blog posts on AI, large language models, and building production systems." />

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;400;500;600;700&family=Source+Code+Pro:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

  <style>
    :root{
      --bg:#0b0b0b;
      --panel:#111111;
      --muted:#b3b3b3;
      --text:#f5f5f5;
      --accent:#e50914;
      --accent-soft:#ff4b61;
      --card:#181818;
      --code-bg:#111827;
      --container: 1100px;
      --ease: cubic-bezier(.2,.9,.3,1);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      background: linear-gradient(180deg,var(--bg) 0%,#070707 100%);
      color:var(--text);
      padding-top:44px;
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .site{max-width:var(--container);margin:0 auto;padding:0 18px 48px}

    .top-title-bar{
      position:fixed;top:0;left:0;right:0;
      background:#000;color:#fff;
      border-bottom:1px solid rgba(255,255,255,0.1);
      z-index:10000;
    }
    .top-title-inner{
      max-width:var(--container);margin:0 auto;
      padding:8px 18px;display:flex;
      align-items:center;justify-content:space-between;
    }
    .top-title-inner h1{
      margin:0;font-size:18px;
      letter-spacing:0.08em;text-transform:uppercase;
      font-family:"Bebas Neue",sans-serif;color:var(--accent);
    }
    .top-title-inner span{font-size:12px;color:var(--muted);}

    header.topbar{
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 18px;margin-top:16px;
      background:#050505;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      box-shadow:0 12px 40px rgba(0,0,0,0.8);
    }
    .brand{display:flex;align-items:center;gap:14px;}
    .logo{
      width:56px;height:56px;border-radius:12px;
      display:flex;align-items:center;justify-content:center;
      background: linear-gradient(180deg,#1b1b1b,#0f0f0f);
      border:2px solid rgba(255,255,255,0.16);
      color:var(--accent);
      font-weight:800;font-size:20px;
      font-family:"Bebas Neue",sans-serif;letter-spacing:1px;
      box-shadow:0 10px 28px rgba(0,0,0,0.8);
    }
    .brand-text h3{margin:0;font-size:18px;color:var(--text);}
    .brand-text p{margin:2px 0 0 0;font-size:13px;color:var(--muted);}

    nav.hud{
      display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end;
    }
    .nav-link{
      color:var(--muted);
      text-decoration:none;
      padding:8px 12px;border-radius:8px;
      font-weight:600;font-size:13px;
      position:relative;
      transition:color 200ms var(--ease),transform 200ms var(--ease),background 200ms var(--ease);
    }
    .nav-link::after{
      content:"";
      position:absolute;left:12px;right:12px;bottom:-6px;
      height:2px;background:var(--accent);
      transform:scaleX(0);
      transform-origin:left center;
      transition:transform 240ms var(--ease);
      border-radius:2px;opacity:0.95;
    }
    .nav-link:hover{
      color:var(--text);
      transform:translateY(-1px);
      background:rgba(255,255,255,0.02);
    }
    .nav-link:hover::after{transform:scaleX(1);}

    .btn-play{
      display:inline-flex;align-items:center;gap:8px;
      background:var(--accent);
      color:#fff;
      padding:10px 18px;border-radius:999px;border:none;
      font-weight:800;font-size:13px;text-decoration:none;
      box-shadow:0 14px 40px rgba(229,9,20,0.55);
      transform:translateY(0);
      transition:transform 200ms var(--ease),box-shadow 200ms var(--ease),background 200ms var(--ease);
      white-space:nowrap;cursor:pointer;
    }
    .btn-play::first-letter{color:#fff;}
    .btn-play:hover{
      transform:translateY(-2px) scale(1.03);
      box-shadow:0 20px 52px rgba(229,9,20,0.75);
      background:var(--accent-soft);
      color:#fff;
    }
    .btn-play:hover::first-letter{color:#fff;}

    main{margin-top:22px;}

    .hero-article{
      margin-top:18px;
      border-radius:14px;
      background: radial-gradient(circle at 0 0,#20111a 0,rgba(10,10,10,0.97) 38%,#050505 100%);
      border:1px solid rgba(255,255,255,0.12);
      padding:18px;
      box-shadow:0 18px 60px rgba(0,0,0,0.9);
      position:relative;
      overflow:hidden;
    }
    .hero-article::before{
      content:"";
      position:absolute;
      top:-120px;right:-80px;
      width:260px;height:260px;
      background:radial-gradient(circle,rgba(229,9,20,0.4) 0,transparent 60%);
      opacity:0.6;
      filter:blur(4px);
      pointer-events:none;
    }
    .hero-pill-row{
      display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
      margin-bottom:10px;
    }
    .hero-pill{
      display:inline-flex;align-items:center;gap:6px;
      padding:4px 9px;
      border-radius:999px;
      background:rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.12);
      font-size:11px;color:var(--muted);
    }
    .hero-pill span.dot{
      width:8px;height:8px;border-radius:999px;background:var(--accent-soft);
      box-shadow:0 0 8px rgba(229,9,20,0.8);
      display:inline-block;
    }

    .hero-title{
      margin:4px 0 8px 0;
      font-size:26px;
      line-height:1.2;
      font-weight:650;
      letter-spacing:0.01em;
      color:var(--text);
    }
    .hero-title span.highlight{color:var(--accent-soft);font-weight:700;}
    .hero-subtitle{
      margin:0 0 12px 0;
      font-size:13px;
      color:rgba(245,245,245,0.78);
      max-width:720px;
    }

    .hero-meta{
      display:flex;flex-wrap:wrap;gap:8px;
      font-size:11px;color:var(--muted);
      margin-bottom:10px;
    }
    .hero-meta span{
      padding:4px 8px;
      border-radius:999px;
      background:rgba(0,0,0,0.4);
      border:1px solid rgba(255,255,255,0.06);
    }

    .hero-content{
      margin-top:6px;
      padding-top:12px;
      border-top:1px solid rgba(255,255,255,0.08);
      display:grid;
      grid-template-columns:2.2fr 1.2fr;
      grid-gap:16px;
    }

    .hero-text p{
      margin:0 0 8px 0;
      font-size:13px;
      color:rgba(245,245,245,0.74);
    }
    .hero-text strong{color:var(--text);}

    .hero-bullets{
      margin-top:6px;
      padding-left:18px;
      font-size:13px;
      color:rgba(245,245,245,0.74);
    }
    .hero-bullets li{margin:4px 0;}

    .hero-side{
      border-radius:10px;
      background: linear-gradient(180deg,rgba(255,255,255,0.02),transparent);
      border:1px solid rgba(255,255,255,0.08);
      padding:10px;
      font-size:12px;
      color:rgba(245,245,245,0.72);
    }
    .hero-side h4{
      margin:0 0 6px 0;
      font-size:13px;
      color:var(--accent-soft);
      font-weight:650;
      letter-spacing:0.04em;
      text-transform:uppercase;
    }
    .hero-side ul{margin:0;padding-left:16px;}
    .hero-side li{margin:2px 0;}

    section.card{
      margin-top:20px;
      padding:16px;
      border-radius:12px;
      background:linear-gradient(180deg, rgba(255,255,255,0.015), transparent);
      border:1px solid rgba(255,255,255,0.06);
    }
    section.card h2{
      margin:0 0 8px 0;
      font-family:"Bebas Neue",sans-serif;
      font-size:26px;
      letter-spacing:1px;
      color:var(--accent);
      text-transform:uppercase;
    }
    section.card p.lead{
      margin:0 0 10px 0;
      color:rgba(245,245,245,0.72);
      font-size:13px;
    }

    .blog-grid{
      display:grid;
      grid-template-columns:2fr 1.2fr;
      grid-gap:18px;
    }

    .post-list{
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .post-card{
      border-radius:10px;
      background:linear-gradient(135deg,#121212 0,#090909 100%);
      border:1px solid rgba(255,255,255,0.06);
      padding:12px 13px 13px 13px;
      box-shadow:0 10px 30px rgba(0,0,0,0.7);
      position:relative;
      overflow:hidden;
    }
    .post-card::before{
      content:"";
      position:absolute;
      inset:0;
      opacity:0;
      background:radial-gradient(circle at top right,rgba(229,9,20,0.3),transparent 60%);
      transition:opacity 200ms var(--ease);
      pointer-events:none;
    }
    .post-card:hover::before{opacity:1;}

    /* MOBILE "AUTO-HOVER" CLASS */
    @media (max-width:720px){
      .post-card.is-active::before{
        opacity:1;
      }
    }

    .post-title{margin:0;font-size:15px;font-weight:650;color:var(--text);}
    .post-meta{margin-top:4px;font-size:11px;color:rgba(245,245,245,0.62);}
    .post-excerpt{margin-top:7px;font-size:13px;color:rgba(245,245,245,0.74);}
    .post-tags{margin-top:7px;display:flex;flex-wrap:wrap;gap:6px;font-size:11px;}
    .post-tag{
      padding:3px 7px;border-radius:999px;background:#101010;
      border:1px solid rgba(255,255,255,0.08);color:rgba(245,245,245,0.72);
    }

    .sidebar{
      border-radius:10px;
      background:linear-gradient(180deg,#121212,#080808);
      border:1px solid rgba(255,255,255,0.08);
      padding:12px 13px;
      box-shadow:0 10px 30px rgba(0,0,0,0.7);
      color:rgba(245,245,245,0.74);
    }
    .sidebar h3{
      margin:0 0 6px 0;
      font-size:15px;
      color:var(--accent-soft);
      text-transform:uppercase;
      letter-spacing:0.08em;
    }
    .sidebar p{margin:4px 0 10px 0;font-size:12px;color:rgba(245,245,245,0.72);}
    .sidebar ul{margin:0;padding-left:16px;font-size:12px;color:rgba(245,245,245,0.72);}
    .sidebar li{margin:3px 0;}
    .sidebar a{color:var(--accent-soft);font-weight:600;text-decoration:none;}
    .sidebar a:hover{color:#fff;text-decoration:underline;}

    pre{
      margin:8px 0 10px 0;padding:10px 12px;border-radius:8px;
      background:var(--code-bg);border:1px solid rgba(148,163,184,0.35);
      color:#e5e7eb;font-size:12px;
      font-family:"Source Code Pro",ui-monospace,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      overflow-x:auto;
    }
    code{
      font-family:"Source Code Pro",ui-monospace,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:12px;background:rgba(15,23,42,0.7);
      padding:1px 4px;border-radius:4px;
      border:1px solid rgba(148,163,184,0.35);
    }
    pre code{background:transparent;border:none;padding:0;}

    footer.site-footer{
      text-align:center;color:var(--muted);
      margin-top:24px;font-size:12px;
    }

    @media (max-width: 980px){
      header.topbar{flex-direction:column;align-items:flex-start;gap:10px;}
      nav.hud{justify-content:flex-start;}
    }

    @media (max-width:720px){
      .site{padding:0 14px 32px;}
      .hero-article{padding:14px;}
      .hero-pill-row{flex-direction:column;align-items:flex-start;}
      .hero-title{font-size:22px;}
      .hero-subtitle{font-size:12px;}
      .hero-content{grid-template-columns:1fr;grid-gap:12px;}
      .hero-text p,.hero-subtitle,.post-excerpt{word-wrap:break-word;overflow-wrap:break-word;hyphens:auto;}
      pre{
        font-size:10px;padding:8px 10px;margin:8px -4px 10px -4px;
        max-width:calc(100vw - 60px);
        overflow-x:auto;-webkit-overflow-scrolling:touch;
      }
      code{font-size:10px;word-break:break-all;}
      pre code{font-size:10px;display:block;white-space:pre;overflow-x:auto;}
      .hero-bullets{padding-left:16px;font-size:12px;word-wrap:break-word;}
      .hero-bullets li{margin:4px 0;word-wrap:break-word;overflow-wrap:break-word;}
      section.card{padding:12px;}
      .blog-grid{grid-template-columns:1fr;grid-gap:14px;}
      .post-excerpt{font-size:12px;}
      .post-card{padding:10px 11px;overflow:hidden;}
      .post-title{font-size:14px;}
    }

    @media (max-width:480px){
      .top-title-inner{padding:6px 12px;}
      header.topbar{padding:10px 12px;margin-top:12px;}
      .logo{width:50px;height:50px;font-size:18px;}
      .hero-title{font-size:20px;}
      .hero-subtitle{font-size:11px;}
      pre{font-size:9px;padding:6px 8px;max-width:calc(100vw - 50px);}
      code{font-size:9px;}
      pre code{font-size:9px;}
      .hero-bullets{font-size:11px;padding-left:14px;}
      .post-excerpt{font-size:11px;}
    }
  </style>
</head>
<body>
  <div class="top-title-bar">
    <div class="top-title-inner">
      <h1>Shuvam Portfolio</h1>
      <span>Blog &amp; Writing</span>
    </div>
  </div>

  <div class="site">
    <header class="topbar" role="banner" aria-label="Main navigation">
      <div class="brand">
        <div class="logo" aria-hidden="true">SK</div>
        <div class="brand-text">
          <h3>Shuvam Khanal</h3>
          <p>AI Researcher • Product-minded • Systems</p>
        </div>
      </div>
      <nav class="hud" aria-label="Primary navigation">
        <a class="nav-link" href="index.html">Home</a>
        <a class="nav-link" href="projects.html">Projects</a>
        <a class="nav-link" href="skills.html">Skills</a>
        <a class="nav-link" href="blog.html">Blog</a>
        <a class="nav-link" href="contact.html">Contact</a>
        <a class="nav-link" href="appointment.html">Appointment</a>
        <a class="btn-play" href="Youtube.html">► WATCH</a>
      </nav>
    </header>

    <main>
      <!-- YOUR CONTENT BELOW IS UNCHANGED -->
      <article class="hero-article">
        <div class="hero-pill-row">
          <div class="hero-pill">
            <span class="dot"></span>
            <span>LLM Systems — Field Notes</span>
          </div>
          <div style="font-size:11px;color:var(--muted);">
            Approx. 8 min read • Written for engineers who actually ship models, not only benchmark them.
          </div>
        </div>

        <h1 class="hero-title">
          From <span class="highlight">Toy LLM Demo</span> to Production System:
          What Actually Breaks in the Real World
        </h1>

        <p class="hero-subtitle">
          Most LLM tutorials stop at "we called the API and got a cool answer."
          In practice, production systems fail on boring things: context limits, latency budgets,
          prompt drift, evaluation, and how humans actually use (and abuse) your feature.
        </p>

        <div class="hero-meta">
          <span>Topics: LLMs, Evaluation, Prompting, Systems Design</span>
        </div>

        <div class="hero-content">
          <div class="hero-text">
            <p>
              When you move from a Jupyter notebook to a shipped feature, an LLM stops being a "smart autocomplete"
              and becomes another <strong>unreliable distributed system</strong> in your stack.
            </p>
            <p>
              In my own projects and in mentoring student teams, failures almost never come from
              "the model isn't big enough." Instead, they come from:
            </p>

            <ul class="hero-bullets">
              <li><strong>Context misuse</strong> — stuffing the entire database into a single prompt.</li>
              <li><strong>No evaluation loop</strong> — shipping prompts based only on vibes.</li>
              <li><strong>Bad UX</strong> — users don't know what the model can or cannot do.</li>
              <li><strong>Missing guardrails</strong> — the model hallucinates confident nonsense.</li>
            </ul>

            <p>
              A useful way to think about LLMs is: they are <strong>probabilistic functions with contracts</strong>, not magic.
              That means you define:
            </p>

            <ul class="hero-bullets">
              <li><em>Inputs</em> — what structure you guarantee (JSON schemas, tools, system prompts).</li>
              <li><em>Budget</em> — latency, token limits, and cost per call.</li>
              <li><em>Failure modes</em> — what you do when the model is wrong, slow, or empty.</li>
            </ul>

            <p>
              Here's a small but real pattern I use: wrap every LLM call in a function that <strong>logs, validates and retries</strong>.
            </p>

            <pre><code>// Pseudo-code: robust LLM call wrapper
async function callLLM({ prompt, schema, maxRetries = 2 }) {
  const start = Date.now();
  let attempt = 0;

  while (attempt &lt;= maxRetries) {
    attempt += 1;
    const raw = await llm.chat({
      prompt,
      model: "gpt-4-mini",
      temperature: 0.2,
      max_tokens: 512
    });

    const latency = Date.now() - start;
    logEvent("llm_call", { latency, attempt, promptLength: prompt.length });

    const parsed = safeJsonParse(raw.content);
    const validated = schema.safeParse(parsed);

    if (validated.success) return validated.data;

    // Ask the model to fix its own output
    prompt = buildSelfCorrectionPrompt(prompt, raw.content, schema);
  }

  throw new Error("LLM failed to return valid data after retries");
}</code></pre>

            <p>This wrapper does three simple things:</p>
            <ul class="hero-bullets">
              <li>Enforces a specific <strong>model, temperature, and token budget</strong>.</li>
              <li>Logs latency so you don't guess later where your time went.</li>
              <li>Validates output against a <strong>schema</strong> instead of hoping it's well‑formed.</li>
            </ul>

            <p>
              The exact implementation doesn't matter as much as the mindset:
              you treat the LLM as <em>one component</em> in a system you own, not as a black box you pray to.
            </p>
          </div>

          <aside class="hero-side">
            <h4>In this series</h4>
            <ul>
              <li>Part 1 — LLMs as Systems, not Magic</li>
              <li>Part 2 — Evaluation that isn't just "vibes"</li>
              <li>Part 3 — Prompt design as API design</li>
              <li>Part 4 — Glue: retrieval, tools, humans‑in‑the‑loop</li>
            </ul>
            <p style="margin-top:8px;">
              I'm writing these notes to be <strong>implementation‑friendly</strong>: close to code and product,
              and honest about where things break.
            </p>
          </aside>
        </div>
      </article>

      <section class="card" aria-labelledby="blog-heading">
        <h2 id="blog-heading">More Notes &amp; Articles</h2>
        <p class="lead">Shorter pieces on AI, systems, and building products that actually ship.</p>

        <div class="blog-grid">
          <div class="post-list">
            <article class="post-card">
              <h3 class="post-title">From Student ML Project to a Real Portfolio Piece</h3>
              <div class="post-meta">Approx. 5 min read • Portfolio, Students, ML</div>
              <p class="post-excerpt">Many student projects look impressive on paper, but fall apart when you ask: "Can I run this? Can I trust it? Does anyone actually want this?" In this post I outline a simple checklist I use with students to turn a lab assignment into a <strong>portfolio story</strong>.</p>
              <p class="post-excerpt">The key shifts are: scope down the problem, make the demo reproducible, and add just enough UX so a non‑ML person understands what the model does — and what it doesn't.</p>
              <div class="post-tags">
                <span class="post-tag">Students</span>
                <span class="post-tag">Portfolio</span>
                <span class="post-tag">ML Projects</span>
              </div>
            </article>

            <article class="post-card">
              <h3 class="post-title">Prompt Engineering is Just API Design With Worse Tooling</h3>
              <div class="post-meta">Approx. 4 min read • Prompting, Product</div>
              <p class="post-excerpt">Good prompts are less like poetry and more like <strong>API contracts</strong>. You define what goes in, what must come out, and how future engineers can change it without breaking everything.</p>
              <p class="post-excerpt">Instead of stuffing style and instructions into one mega‑prompt, I prefer to separate:</p>
              <ul class="hero-bullets" style="margin-top:4px;">
                <li>A stable <strong>system prompt</strong> that defines behavior and constraints.</li>
                <li>A small <strong>task prompt</strong> that focuses on the immediate user question.</li>
                <li>Clear <strong>output format</strong> examples (JSON, markdown sections, etc.).</li>
              </ul>
              <div class="post-tags">
                <span class="post-tag">Prompting</span>
                <span class="post-tag">APIs</span>
              </div>
            </article>

            <article class="post-card">
              <h3 class="post-title">RAG for Humans: Designing Retrieval That Feels Intuitive</h3>
              <div class="post-meta">Approx. 6 min read • RAG, UX, Search</div>
              <p class="post-excerpt">Retrieval‑augmented generation (RAG) diagrams are easy; building one that users actually trust is harder.</p>
              <p class="post-excerpt">Most RAG failures I see are UX issues: users don't know what documents are indexed, what "knowledge" the system has, or why it answered with something obviously incomplete.</p>
              <p class="post-excerpt">In this note I talk about: showing <strong>source snippets</strong>, exposing <strong>filters</strong> ("search in: docs / FAQ / emails"), and giving users a simple way to say "this answer is wrong" that feeds back into evaluation.</p>
              <div class="post-tags">
                <span class="post-tag">RAG</span>
                <span class="post-tag">UX</span>
                <span class="post-tag">Search</span>
              </div>
            </article>
          </div>

          <aside class="sidebar" aria-label="Reading guide">
            <h3>How to Use This Blog</h3>
            <p>These posts are meant to be reference material you can come back to: not news, but <strong>mental models</strong> and checklists.</p>
            <ul>
              <li><strong>New to AI?</strong> Focus on the intuition sections and diagrams; ignore implementation details at first.</li>
              <li><strong>Student or early‑career?</strong> Look for parts where I talk about <em>portfolios</em>, <em>team projects</em>, and <em>communicating your work</em>.</li>
              <li><strong>Already shipping products?</strong> Skim for patterns you can steal: evaluation loops, prompt structures, UX ideas.</li>
            </ul>
            <p style="margin-top:10px;">
              If there's a topic you want me to write about — for example,
              <strong>"How to explain LLMs to non‑technical stakeholders"</strong> or
              <strong>"Setting up a tiny but real MLOps pipeline as a student"</strong> —
              mention it in the <a href="appointment.html">appointment form</a>.
            </p>
          </aside>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      &copy; 2025 Shuvam Khanal.
    </footer>
  </div>

  <script>
    (function(){
      // Keep your existing WATCH button pulse
      const playButtons = document.querySelectorAll('.btn-play');
      if(playButtons.length){
        setInterval(function(){
          playButtons.forEach(play => {
            play.style.transform = 'scale(1.02)';
            play.style.boxShadow = '0 18px 52px rgba(229,9,20,0.65)';
            setTimeout(function(){
              play.style.transform = '';
              play.style.boxShadow = '0 14px 40px rgba(229,9,20,0.55)';
            }, 450);
          });
        }, 3200);
      }

      // MOBILE: auto-highlight post-card when it's in the middle of the screen
      function enableMobileAutoHover(){
        if(!window.matchMedia('(max-width: 720px)').matches) return;

        const cards = Array.from(document.querySelectorAll('.post-card'));
        if(!cards.length) return;

        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if(entry.isIntersecting){
              // Only one active at a time
              cards.forEach(c => c.classList.remove('is-active'));
              entry.target.classList.add('is-active');
            }
          });
        }, {
          // "middle zone" of the viewport
          root: null,
          rootMargin: '-45% 0px -45% 0px',
          threshold: 0.01
        });

        cards.forEach(card => observer.observe(card));
      }

      enableMobileAutoHover();
    })();
  </script>
</body>
</html>
